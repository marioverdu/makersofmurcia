@tailwind base;
@tailwind components;
@tailwind utilities;

/* SEO Enhanced Content Styles */
.seo-ordered-list {
  @apply list-decimal list-inside space-y-2 my-4;
}

.seo-unordered-list {
  @apply list-disc list-inside space-y-2 my-4;
}

.seo-list-item {
  @apply leading-relaxed;
}

.seo-table {
  @apply w-full border-collapse border border-gray-300 my-6;
}

.seo-table th,
.seo-table td {
  @apply border border-gray-300 px-4 py-2;
}

.seo-table th {
  @apply bg-gray-50 font-semibold;
}

.seo-important-paragraph {
  @apply bg-blue-50 border-l-4 border-blue-400 p-4 my-4 rounded-r;
}

.seo-blockquote {
  @apply border-l-4 border-gray-400 pl-4 italic my-6 text-gray-700;
}

/* Table of Contents Styles */
.table-of-contents {
  @apply bg-gray-50 border border-gray-200 rounded-lg p-4 my-6;
}

.table-of-contents h2 {
  @apply text-lg font-semibold mb-3 text-gray-800;
}

.table-of-contents ol {
  @apply space-y-1;
}

.table-of-contents a {
  @apply text-blue-600 hover:text-blue-800 hover:underline;
}

/* Heading anchor links */
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {
  @apply scroll-mt-20;
}

h1[id]:hover::before,
h2[id]:hover::before,
h3[id]:hover::before,
h4[id]:hover::before,
h5[id]:hover::before,
h6[id]:hover::before {
  content: "游댕";
  @apply absolute -ml-8 text-gray-400 opacity-50;
}

:root {
  --foreground-rgb: 0, 0, 0;
  --background-rgb: 243, 246, 246;
}

/* Prevent layout shift - Critical for all pages */
html {
  scroll-behavior: smooth;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
  /* Prevent horizontal scrollbar flash */
  overflow-x: hidden;
  /* Prevent layout shift during hydration */
  min-height: 100vh;
  /* Ensure consistent font loading */
  font-display: swap;
}

/* Prevent layout shift during component mounting */
* {
  box-sizing: border-box;
}

/* Ensure consistent spacing during hydration */
.claim,
.flex.flex-col.items-start.relative.z-10,
.flex.justify-center.items-center.w-full.relative {
  /* Prevent layout shift by ensuring consistent padding */
  padding-left: 1rem; /* 16px */
  padding-right: 1rem; /* 16px */
}

@media (min-width: 768px) {
  .claim,
  .flex.flex-col.items-start.relative.z-10,
  .flex.justify-center.items-center.w-full.relative {
    padding-left: 3.75rem; /* 60px */
    padding-right: 3.75rem; /* 60px */
  }
}

/* Prevent avatar position shift */
.w-\[28px\].h-\[28px\].rounded-full {
  /* Ensure consistent positioning */
  position: relative;
  z-index: 1;
}

/* Prevent header layout shift */
.custom-header-padding {
  /* Ensure consistent padding from the start */
  padding: 0 8px 2px 8px;
  transition: none; /* Disable transitions during initial load */
}

/* Disable transitions during hydration to prevent layout shift */
* {
  transition: none;
}

/* Re-enable transitions after hydration */
.hydrated * {
  transition: all 0.3s ease;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  .halftone-bg {
    background-image: radial-gradient(currentColor 1px, transparent 1px);
    background-size: 8px 8px;
    color: rgba(0,0,0,0.9);
  }
  .text-stroke {
    -webkit-text-stroke: 4px #000;
    color: transparent;
  }
  .text-stroke-red {
    -webkit-text-stroke: 4px #000;
    color: #ff1a1a;
  }
  .text-stroke-double {
    text-shadow:
      2px 2px 0 #000,
      -2px -2px 0 #000,
      2px -2px 0 #000,
      -2px 2px 0 #000;
    color: #fff;
  }
}

@layer base {
  :root {
    --background: 0% 100%;
    --foreground: 0% 3.9%;
    --card: 0% 100%;
    --card-foreground: 0% 3.9%;
    --popover: 0% 100%;
    --popover-foreground: 0% 3.9%;
    --primary: 200 28% 33%;
    --primary-foreground: 0% 98%;
    --secondary: 0% 96.1%;
    --secondary-foreground: 0% 9%;
    --muted: 0% 96.1%;
    --muted-foreground: 0% 45.1%;
    --accent: 0% 96.1%;
    --accent-foreground: 0% 9%;
    --destructive: 84.2% 60.2%;
    --destructive-foreground: 0% 98%;
    --border: 0% 89.8%;
    --input: 0% 89.8%;
    --ring: 0% 3.9%;
    --radius: 0.5rem;

    /* Nuevos tokens de dise침o */
    --header-height: 40px;
    --header-bg: 169 95% 93%; /* Equivalente a #E4F6F5 en HSL */
    --header-border: 206 1% 27%;
    --background-support: rgba(0, 112, 243, 0.05);
    --color-text: 206 1% 27%; /* Color del texto principal */
    --site-background: 180 6% 96%; /* #F3F6F6 en HSL */
  }
}

/* Animaci칩n de flotaci칩n lenta */
@keyframes floating {
  0% {
    transform: translateY(0) rotate(0deg);
  }
  25% {
    transform: translateY(-5px) rotate(0.3deg);
  }
  50% {
    transform: translateY(0) rotate(0deg);
  }
  75% {
    transform: translateY(5px) rotate(-0.3deg);
  }
  100% {
    transform: translateY(0) rotate(0deg);
  }
}

/* Animaci칩n del efecto especular */
@keyframes specular-shine {
  0% {
    background-position: -100% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.floating-element {
  animation: floating 12s ease-in-out infinite;
  transition: transform 0.5s ease;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.floating-delay-1 {
  animation-delay: 0s;
}

.floating-delay-2 {
  animation-delay: -4s;
}

.floating-delay-3 {
  animation-delay: -8s;
}

/* Efecto especular */
.specular {
  position: relative;
  overflow: hidden;
}

.specular::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  animation: specular-shine 8s linear infinite;
  background-size: 200% 100%;
}

/* Cookie Consent Widget Styles */
.cookie-widget-enter {
  opacity: 0;
  transform: translateY(20px);
}

.cookie-widget-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 300ms, transform 300ms;
}

.cookie-widget-exit {
  opacity: 1;
}

.cookie-widget-exit-active {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 300ms, transform 300ms;
}

/* Toggle button animation */
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(61, 91, 106, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(61, 91, 106, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(61, 91, 106, 0);
  }
}

.cookie-toggle-button {
  animation: pulse 2s infinite;
}

/* Cookie consent widget z-index management */
.cookie-consent-widget {
  z-index: 60; /* Higher than most elements but lower than critical modals */
}

/* Ensure proper stacking with chat button */
#chat-tuenti-button-v2 {
  z-index: 50;
}

/* Prevent overlap on mobile */
@media (max-width: 767px) {
  .cookie-consent-widget {
    max-height: calc(100vh - 120px); /* Leave space for chat button */
  }
}

/* Estilos para el nuevo header */
.custom-header-padding {
  padding: 0 8px 2px 8px;
}

@media (min-width: 640px) {
  .custom-header-padding {
    padding: 0 16px 2px 16px;
  }
}

@media (min-width: 768px) {
  .custom-header-padding {
    padding: 0 16px 2px 16px;
  }
}

@media (min-width: 1024px) {
  .custom-header-padding {
    padding: 0 16px 2px 16px;
  }
}

@media (min-width: 1280px) {
  .custom-header-padding {
    padding: 0 24px 2px 24px;
  }
}

@media (min-width: 1536px) {
  .custom-header-padding {
    padding: 0 216px 2px 216px;
  }
}

.glass-bg {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

/* Post Card Hover Effect - Outline Stroke Negro */
.post-card-hover {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.post-card-hover:hover {
  outline: 2px solid #000000;
  outline-offset: 8px;
  transform: translateY(-2px);
}

/* Variante con offset m치s prominente */
.post-card-hover-prominent:hover {
  outline: 2px solid #000000;
  outline-offset: 12px;
  transform: translateY(-3px);
}

/* Admin Routes Responsive Styles */
.admin-routes-card {
  @apply overflow-hidden;
}

.admin-routes-card .route-item {
  @apply transition-all duration-200;
}

.admin-routes-card .route-item:hover {
  @apply bg-gray-50;
}

/* Responsive dropdown styles */
.admin-routes-card select {
  @apply transition-all duration-200;
}

.admin-routes-card select:focus {
  @apply ring-2 ring-primary ring-offset-1;
}

/* Mobile-first responsive breakpoints */
@media (max-width: 640px) {
  .admin-routes-card .route-item {
    @apply flex-col gap-3;
  }
  
  .admin-routes-card .route-controls {
    @apply w-full justify-between;
  }
  
  .admin-routes-card .rewrite-section {
    @apply w-full;
  }
  
  .admin-routes-card select {
    @apply w-full text-xs;
  }
}

@media (min-width: 641px) and (max-width: 768px) {
  .admin-routes-card .route-item {
    @apply flex-row items-center gap-2;
  }
  
  .admin-routes-card .route-controls {
    @apply flex-shrink-0;
  }
  
  .admin-routes-card .rewrite-section {
    @apply flex-row items-center;
  }
  
  .admin-routes-card select {
    @apply min-w-0 max-w-xs;
  }
}

@media (min-width: 769px) {
  .admin-routes-card .route-item {
    @apply flex-row items-center gap-3;
  }
  
  .admin-routes-card .route-controls {
    @apply flex-shrink-0;
  }
  
  .admin-routes-card .rewrite-section {
    @apply flex-row items-center;
  }
  
  .admin-routes-card select {
    @apply min-w-0 max-w-sm;
  }
}

/* Ensure text truncation works properly */
.admin-routes-card .truncate-text {
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
}

/* Badge responsive adjustments */
@media (max-width: 480px) {
  .admin-routes-card .badge-container {
    @apply flex-wrap gap-1;
  }
  
  .admin-routes-card .badge {
    @apply text-xs px-1 py-0.5;
  }
}

/* Switch responsive adjustments */
@media (max-width: 640px) {
  .admin-routes-card .switch-container {
    @apply flex-shrink-0;
  }
}

/* Stats cards responsive */
@media (max-width: 640px) {
  .admin-stats-grid {
    @apply grid-cols-2 gap-2;
  }
  
  .admin-stats-card {
    @apply p-3;
  }
  
  .admin-stats-card .card-title {
    @apply text-xs;
  }
  
  .admin-stats-card .card-value {
    @apply text-lg;
  }
  
  .admin-stats-card .card-description {
    @apply text-xs;
  }
}

@media (min-width: 641px) {
  .admin-stats-grid {
    @apply grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4;
  }
  
  .admin-stats-card {
    @apply p-4;
  }
  
  .admin-stats-card .card-title {
    @apply text-sm;
  }
  
  .admin-stats-card .card-value {
    @apply text-2xl;
  }
  
  .admin-stats-card .card-description {
    @apply text-xs;
  }
}

/* Unified card section styles */
.admin-routes-card .unified-section {
  @apply space-y-6;
}

.admin-routes-card .stats-section {
  @apply border-b border-gray-200 pb-6;
}

.admin-routes-card .system-info-section {
  @apply border-b border-gray-200 pb-6;
}

.admin-routes-card .routes-list-section {
  @apply pt-2;
}

/* System info responsive */
@media (max-width: 640px) {
  .admin-routes-card .system-info-grid {
    @apply grid-cols-1 gap-2;
  }
  
  .admin-routes-card .system-info-item {
    @apply text-xs;
  }
}

@media (min-width: 641px) {
  .admin-routes-card .system-info-grid {
    @apply grid-cols-2 gap-3;
  }
  
  .admin-routes-card .system-info-item {
    @apply text-sm;
  }
}

/* Section headers */
.admin-routes-card .section-header {
  @apply text-lg font-semibold mb-3 text-gray-800;
}

@media (max-width: 640px) {
  .admin-routes-card .section-header {
    @apply text-base mb-2;
  }
}

/* Unified card structure */
.admin-routes-card .unified-section {
  @apply space-y-6;
}

.admin-routes-card .main-routes-section,
.admin-routes-card .other-routes-section {
  @apply border-t border-gray-200 pt-6;
}

.admin-routes-card .main-routes-section:first-child,
.admin-routes-card .other-routes-section:first-child {
  @apply border-t-0 pt-0;
}

/* Card header responsive */
.admin-routes-card .card-header-content {
  @apply flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-2;
}

.admin-routes-card .card-header-title {
  @apply min-w-0 flex-1;
}

.admin-routes-card .card-header-controls {
  @apply flex flex-wrap items-center gap-2 min-w-0;
}

/* Section descriptions */
.admin-routes-card .section-description {
  @apply text-sm text-muted-foreground mb-4;
}

@media (max-width: 640px) {
  .admin-routes-card .section-description {
    @apply text-xs mb-3;
  }
}

/* Routes Widget Styles - using CSS properties to avoid circular dependencies */
.routes-widget { 
  overflow: hidden; 
}

.routes-widget .route-item-compact { 
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem;
  background-color: #f9fafb;
  border-radius: 0.375rem;
  transition: all 200ms;
}

.routes-widget .route-item-compact:hover {
  background-color: #f3f4f6;
}

.routes-widget select { 
  transition: all 200ms;
  font-size: 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 0.25rem;
  padding: 0.125rem 0.25rem;
  background-color: rgba(255, 255, 255, 0.6);
  color: #374151;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.routes-widget select:focus { 
  outline: none;
  ring: 1px solid #06b6d4;
}

/* Stats grid */
.routes-widget .stats-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.5rem;
}

/* Other routes preview */
.routes-widget .other-routes-scroll {
  max-height: 8rem;
  overflow-y: auto;
}

/* Routes Widget Responsive */
@media (max-width: 640px) {
  .routes-widget .route-item-compact { 
    flex-direction: column; 
    gap: 0.25rem; 
  }
  
  .routes-widget .route-item-compact > div:last-child { 
    width: 100%; 
    justify-content: space-between; 
  }
  
  .routes-widget select { 
    width: 5rem; 
  }
  
  .routes-widget .other-routes-scroll {
    max-height: 6rem;
  }
}

@media (max-width: 480px) {
  .routes-widget .route-item-compact { 
    padding: 0.375rem; 
  }
  
  .routes-widget .route-item-compact > div:last-child { 
    flex-direction: column; 
    align-items: flex-start; 
    gap: 0.25rem; 
  }
  
  .routes-widget select { 
    width: 100%; 
  }
  
  .routes-widget .stats-grid {
    grid-template-columns: repeat(1, minmax(0, 1fr));
    gap: 0.25rem;
  }
  
  .routes-widget .badge { 
    font-size: 0.75rem; 
    padding: 0.125rem 0.25rem; 
  }
}

/* Estilos globales para elementos select - Color consistente con primary */
select {
  color: hsl(var(--primary));
}

select option {
  color: hsl(var(--primary));
}

/* Asegurar que el texto del select sea consistente en todos los navegadores */
select:focus {
  color: hsl(var(--primary));
}

/* Para elementos select con clases espec칤ficas que puedan tener estilos diferentes */
select.px-4,
select.py-2,
select.border,
select.rounded-md,
select.focus\:outline-none,
select.focus\:ring-2,
select.focus\:ring-primary,
select.bg-white {
  color: hsl(var(--primary)) !important;
}

select.px-4 option,
select.py-2 option,
select.border option,
select.rounded-md option,
select.focus\:outline-none option,
select.focus\:ring-2 option,
select.focus\:ring-primary option,
select.bg-white option {
  color: hsl(var(--primary)) !important;
}

/* Estilos espec칤ficos para selects con focus ring cyan - mantener consistencia */
select.focus\:ring-cyan-500 {
  color: hsl(var(--primary)) !important;
}

select.focus\:ring-cyan-500 option {
  color: hsl(var(--primary)) !important;
}

/* Estilos espec칤ficos para botones primary - asegurar texto blanco */
.bg-primary {
  background-color: hsl(var(--primary)) !important;
}

.text-primary-foreground {
  color: hsl(var(--primary-foreground)) !important;
}

/* Asegurar que los botones con bg-primary tengan texto blanco */
button.bg-primary,
button.bg-primary\/90 {
  color: white !important;
}

/* Estilos espec칤ficos para el bot칩n "Volver Posts" */
button.px-6.py-3.bg-primary.text-primary-foreground {
  color: white !important;
}

/* Estilos m치s espec칤ficos para asegurar que funcione */
button[class*="bg-primary"][class*="text-primary-foreground"] {
  color: white !important;
}

/* Estilos para cualquier bot칩n con bg-primary */
button.bg-primary {
  color: white !important;
}

/* Estilos para el hover tambi칠n */
button.bg-primary\/90 {
  color: white !important;
}

/* Estilos para badges con bg-primary - asegurar texto blanco */
div.bg-primary {
  color: white !important;
}

/* Estilos espec칤ficos para badges */
div[class*="bg-primary"][class*="text-primary-foreground"] {
  color: white !important;
}

/* Estilos para badges con hover */
div.bg-primary\/80 {
  color: white !important;
}

/* Estilos b치sicos para AdvancedTableV2 - fondos transparentes */
.ProseMirror table {
  background-color: transparent !important;
}

.ProseMirror table thead th {
  background-color: transparent !important;
}

.ProseMirror table tbody td {
  background-color: transparent !important;
}

/* Estilos b치sicos para tablas en prose */
.prose table {
  background-color: transparent !important;
}

.prose table thead th {
  background-color: transparent !important;
}

.prose table tbody td {
  background-color: transparent !important;
}

/* Eliminar estilos conflictivos */
table.bg-white {
  background-color: transparent !important;
}

th.bg-gray-100 {
  background-color: transparent !important;
}

td.bg-white {
  background-color: transparent !important;
}

/* Im치genes en tablas - ancho m칤nimo de 92px */
.prose table img {
  min-width: 92px !important;
  max-width: 100% !important;
  height: auto !important;
  max-height: 128px !important;
  object-fit: contain !important;
}

/* Contenedores de im치genes en tablas */
.prose table .relative.inline-block {
  min-width: 92px !important;
}

.prose table .relative.inline-block img {
  min-width: 92px !important;
  max-width: 100% !important;
  height: auto !important;
  max-height: 128px !important;
  object-fit: contain !important;
}
